<div fxLayout="row" fxLayoutAlign="space-between center">
  <app-breadcrumb></app-breadcrumb>
  <button mat-flat-button color="accent">
    <mat-icon>add</mat-icon>
    <span class="font-ocra">Create Job</span>
  </button>
</div>

<div *ngIf="isLoading" class="container" fxLayout="row" fxLayoutAlign="center center">
  <mat-spinner></mat-spinner>
</div>

<div class="page-h-full" *ngIf="jobs.length == 0 && !isLoading">
  <roc-empty-state icon="assignment" title="No Job Exists"
                   caption="No Job record found on this project."></roc-empty-state>
</div>

<ng-template *ngIf="!isLoading && jobs.length > 0">
  <table mat-table [dataSource]="dataSource">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> #</th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <ng-container matColumnDef="task-force">
      <th mat-header-cell *matHeaderCellDef>Task Force</th>
      <td mat-cell *matCellDef="let element"> {{element.taskForce.name}} </td>
    </ng-container>

    <ng-container matColumnDef="source">
      <th mat-header-cell *matHeaderCellDef>Source</th>
      <td mat-cell *matCellDef="let element">{{element.taskForce.repositoryUrl}} </td>
    </ng-container>

    <ng-container matColumnDef="environment">
      <th mat-header-cell *matHeaderCellDef> Environment</th>
      <td mat-cell *matCellDef="let element"> {{element.environment.name}} </td>
    </ng-container>

    <ng-container matColumnDef="agent">
      <th mat-header-cell *matHeaderCellDef>Agent</th>
      <td mat-cell *matCellDef="let element"> {{element.agent.displayName}} </td>
    </ng-container>

    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>Date</th>
      <td mat-cell *matCellDef="let element"> {{element.createdAt | date:'medium' }} </td>
    </ng-container>

    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef>State</th>
      <td mat-cell *matCellDef="let element"
          [style.color]="element.status | jobStatusColor"> {{element.status | jobStatus }} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[10, 20]"
                 showFirstLastButtons
                 aria-label="Select page of periodic elements">
  </mat-paginator>
</ng-template>
